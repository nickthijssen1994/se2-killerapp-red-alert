
@using System.Drawing
@model KillerAppASP.ViewModels.MapCreatorViewModel

@{
    ViewData["Title"] = "Map Creator";
}

<div class="row mapcreator-form">
    <h1>Map Creator</h1>
    <hr />
    <div class="col-md-4">
        <form asp-controller="MapCreator" asp-action="GenerateMap" method="post" class="form-group">
            <div class="form-group">
                <input asp-for="GenerateViewModel.MapName" class="form-control" type="text" placeholder="Map Name">
            </div>
            <div class="form-group row">
                <div class="col-md-2">
                    <label>Size:</label>
                </div>
                <div class="col-md-10">
                    <input type="range" value="400" min="200" max="800" class="col-md-10 slider" asp-for="GenerateViewModel.MapSize">
                </div>
            </div>
            <div class="form-group">
                <select asp-for="GenerateViewModel.MapGroundType" id="inputState" class="form-control">
                    <option value="1" selected>Grass</option>
                    <option value="2">Sand</option>
                    <option value="3">Snow</option>
                </select>
            </div>
            <div class="form-group">
                <select asp-for="GenerateViewModel.MapType" id="inputState" class="form-control">
                    <option value="0" selected>Continent</option>
                    <option value="1">Island</option>
                </select>
            </div>
            <div class="form-group row">
                <div class="col-md-6">
                    <input asp-for="GenerateViewModel.HasRivers" class="form-check-input" type="checkbox">
                    <label>Add Rivers</label>
                </div>
                <div class="col-md-6">
                    <input asp-for="GenerateViewModel.HasLakes" class="form-check-input" type="checkbox">
                    <label>Add Lakes</label>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-md-2">
                    <label>Seed:</label>
                </div>
                <div class="col-md-10">
                    <input asp-for="GenerateViewModel.MapSeed" class="form-control" type="number" value="1" min="1" max="1000">
                </div>
            </div>
            <button type="submit" class="btn btn-primary">
                <span class="glyphicon glyphicon-log-in"></span> Generate
            </button>
        </form>
        <div class="btn-group btn-group-justified" role="group">
            <a href='@Url.Action("GenerateMap", "MapCreator")' class="btn btn-primary" role="button">Generate Map</a>
            <a href='@Url.Action("SaveMap", "MapCreator")' class="btn btn-primary" role="button">Save Map</a>
        </div>
        <div class="btn-group btn-group-justified" role="group">
            <a href='@Url.Action("Index", "MainMenu")' class="btn btn-primary" role="button">Main Menu</a>
            <a href="@Url.Action("DeleteMap", "MapCreator")" class="btn btn-primary" role="button">Delete Map</a>
        </div>
    </div>
    <div class="col-md-3">
        <h3>Saved Maps</h3>
        <div class="list-group pre-scrollable">
            @foreach (Map map in Model.ListViewModel.AllMaps)
            {
                <a href="#" class="list-group-item">@map.Name</a>
            }
        </div>
    </div>
    <div class="col-md-5">
        <h3>Map Preview</h3>
        @{
            Image image = Model.ListViewModel.AllMaps[0].Image;
            Graphics graphics = Graphics.FromImage(image);
            image.Save(@"wwwroot\images\preview.jpeg", System.Drawing.Imaging.ImageFormat.Jpeg);
        }
        <img src="~/images/preview.jpeg" class="img-responsive" alt="Map Preview">
    </div>
</div>
